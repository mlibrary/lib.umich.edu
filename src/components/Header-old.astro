---
/**
 * Site Header Component - Converted to Pure Astro
 * Original: src/components/header/index.jsx, header-largescreen.js, header-smallscreen.js
 * 
 * Includes both mobile and desktop versions with full functionality
 */
import { fetchPrimaryNav, fetchUtilityNav } from '../lib/drupal.js';

// Fetch navigation data at build time
const primary = await fetchPrimaryNav();
const secondary = await fetchUtilityNav();

// SPACING values from reusable constants
const SPACING = {
  'XS': '0.5rem',
  'S': '0.75rem',
  'M': '1rem',
  'L': '1.5rem',
  'XL': '2rem',
  '2XS': '0.25rem',
  '2XL': '3rem'
};
---

<!-- Mobile/Small Screen Header -->
<header class="header-small">
  <div class="header-container">
    <div class="header-small-flex">
      <!-- Logo -->
      <div class="logo-wrapper-small">
        <a href="/" class="logo-link">
          <svg
            viewBox="0 0 199 30"
            focusable="false"
            aria-label="University of Michigan Library"
            class="logo-svg-small"
            role="img"
          >
            <title>University of Michigan Library</title>
            <g fill="none" fillRule="evenodd">
              <g fillRule="nonzero">
                <polyline fill="var(--color-maize-400, #FFCB05)" points="20.9572917 24.7441667 12.3733333 13.0122917 12.3733333 21.5458333 15.7866667 21.5458333 15.7866667 29.973125 0 29.973125 0 21.5458333 3.19875 21.5458333 3.19875 8.425625 0 8.425625 0 0 12.4010417 0 20.9572917 11.8164583 29.5135417 0 41.9116667 0 41.9116667 8.425625 38.7110417 8.425625 38.7110417 21.5458333 41.9116667 21.5458333 41.9116667 29.973125 26.1270833 29.973125 26.1270833 21.5458333 29.5377083 21.5458333 29.5377083 13.0122917 20.9572917 24.7441667"></polyline>
                <polyline fill="var(--color-blue-400, #00274C)" points="58.6452083 30 58.6452083 0.0420833333 62.461875 0.0420833333 62.461875 26.680625 73.4579167 26.680625 73.4579167 30 58.6452083 30"></polyline>
                <polygon fill="var(--color-blue-400, #00274C)" points="77.9570833 29.9875 81.773125 29.9875 81.773125 0.0420833333 77.9570833 0.0420833333"></polygon>
                <path d="M91.0308333,26.680625 L96.425,26.680625 C100.491042,26.680625 101.944583,23.775625 101.944583,21.5777083 C101.944583,16.8052083 98.9972917,15.9754167 95.0983333,15.9754167 L91.0308333,15.9754167 L91.0308333,26.680625 Z M91.0308333,12.655625 L96.5916667,12.655625 C99.5779167,12.6139583 101.032083,10.7891667 101.032083,7.884375 C101.032083,5.395 99.6195833,3.36145833 96.425,3.36145833 L91.0308333,3.36145833 L91.0308333,12.655625 Z M87.2135417,30 L87.2135417,0.0420833333 L96.9652083,0.0420833333 C101.114375,0.0420833333 102.524792,1.4525 103.644792,3.11291667 C104.683542,4.73125 104.848958,6.51583333 104.848958,7.095625 C104.848958,10.83 103.562917,13.320625 99.7033333,14.1910417 L99.7033333,14.399375 C103.978333,14.8972917 105.844583,17.4695833 105.844583,21.5777083 C105.844583,29.2535417 100.242708,30 96.8402083,30 L87.2135417,30 Z" fill="var(--color-blue-400, #00274C)"></path>
                <path d="M113.772708,12.9047917 L119.500625,12.9047917 C122.239792,12.9047917 123.5675,10.5397917 123.5675,7.925 C123.5675,5.76791667 122.485833,3.36145833 119.540625,3.36145833 L113.772708,3.36145833 L113.772708,12.9047917 Z M113.772708,16.2245833 L113.772708,30 L109.956458,30 L109.956458,0.0420833333 L120.28875,0.0420833333 C125.6,0.0420833333 127.465625,3.77729167 127.465625,7.51104167 C127.465625,11.0377083 125.515833,13.7347917 121.988125,14.3575 L121.988125,14.44 C125.431042,14.9795833 126.675417,16.14125 126.885,22.1570833 C126.927083,23.4435417 127.341042,28.1325 127.924167,30 L123.940833,30 C122.860417,27.9254167 123.108542,24.025625 122.777083,20.041875 C122.485833,16.3908333 119.540625,16.2245833 118.25625,16.2245833 L113.772708,16.2245833 Z" fill="var(--color-blue-400, #00274C)"></path>
                <path d="M143.173333,3.56770833 L143.09,3.56770833 L138.401042,19.5439583 L147.989375,19.5439583 L143.173333,3.56770833 Z M140.848333,0.0420833333 L145.703958,0.0420833333 L155.45625,30 L151.181875,30 L149.025417,22.8620833 L137.448958,22.8620833 L135.207292,30 L131.349167,30 L140.848333,0.0420833333 Z" fill="var(--color-blue-400, #00274C)"></path>
                <path d="M162.97875,12.9047917 L168.704583,12.9047917 C171.442292,12.9047917 172.769167,10.5397917 172.769167,7.925 C172.769167,5.76791667 171.69125,3.36145833 168.745625,3.36145833 L162.97875,3.36145833 L162.97875,12.9047917 Z M162.97875,16.2245833 L162.97875,30 L159.159375,30 L159.159375,0.0420833333 L169.491667,0.0420833333 C174.801667,0.0420833333 176.670625,3.77729167 176.670625,7.51104167 C176.670625,11.0377083 174.720208,13.7347917 171.192708,14.3575 L171.192708,14.44 C174.636458,14.9795833 175.881042,16.14125 176.087917,22.1570833 C176.1325,23.4435417 176.546458,28.1325 177.125833,30 L173.142083,30 C172.064583,27.9254167 172.314583,24.025625 171.981875,20.041875 C171.69125,16.3908333 168.745625,16.2245833 167.459583,16.2245833 L162.97875,16.2245833 Z" fill="var(--color-blue-400, #00274C)"></path>
                <polyline fill="var(--color-blue-400, #00274C)" points="194.878958 0.0420833333 198.737917 0.0420833333 190.562708 18.5897917 190.562708 30 186.744583 30 186.744583 18.5897917 178.695208 0.0420833333 182.968542 0.0420833333 188.82 14.5227083 194.878958 0.0420833333"></polyline>
                <polygon fill="var(--color-blue-400, #00274C)" points="50.1395834 29.9875 51.19625 29.9875 51.19625 0 50.1395834 0"></polygon>
              </g>
            </g>
          </svg>
        </a>
      </div>
      
      <!-- Mobile Nav Toggle + Search -->
      <nav aria-label="Main and utility" class="mobile-nav-wrapper">
        <!-- Search Icon Button -->
        <button class="mobile-search-btn" aria-label="Search" id="mobile-search-btn">
          <span class="material-icons" style="font-size: 32px;">search</span>
        </button>
        
        <!-- Menu Toggle Button -->
        <button class="mobile-menu-toggle" aria-expanded="false" id="mobile-menu-toggle">
          <span class="material-icons menu-icon" style="font-size: 32px;">menu</span>
          <span class="visually-hidden">Navigation</span>
        </button>
        
        <!-- Mobile Dropdown -->
        <div class="mobile-dropdown" id="mobile-dropdown" hidden>
          {primary && primary.length > 0 && (
            <nav aria-label="Primary navigation">
              <ul class="mobile-primary-nav">
                {primary.map((item, index) => (
                  <li class="mobile-primary-item">
                    <button 
                      class="mobile-primary-btn"
                      data-index={index}
                      aria-expanded="false"
                    >
                      {item.text}
                    </button>
                    {item.children && item.children.length > 0 && (
                      <div class="mobile-panel" hidden>
                        <ul class="mobile-panel-list">
                          {item.children.map((child) => (
                            <li><a href={child.to}>{child.text}</a></li>
                          ))}
                        </ul>
                      </div>
                    )}
                  </li>
                ))}
              </ul>
            </nav>
          )}
          
          {secondary && secondary.length > 0 && (
            <nav aria-label="Utility navigation" class="mobile-secondary-nav">
              <ul>
                {secondary.map((item) => (
                  <li>
                    <a href={item.to}>
                      {item.icon && <span class="material-icons" style="font-size: 14px;">{item.icon}</span>}
                      {item.text}
                    </a>
                  </li>
                ))}
              </ul>
            </nav>
          )}
        </div>
      </nav>
    </div>
  </div>
</header>

<!-- Desktop/Large Screen Header -->
<header class="header-large">
  <div class="header-container">
    <div class="header-large-content">
      <!-- Logo -->
      <div class="logo-wrapper-large">
        <a href="/" class="logo-link">
          <svg
            viewBox="0 0 199 30"
            focusable="false"
            aria-label="University of Michigan Library"
            class="logo-svg-large"
            role="img"
          >
            <title>University of Michigan Library</title>
            <g fill="none" fillRule="evenodd">
              <g fillRule="nonzero">
                <polyline fill="var(--color-maize-400, #FFCB05)" points="20.9572917 24.7441667 12.3733333 13.0122917 12.3733333 21.5458333 15.7866667 21.5458333 15.7866667 29.973125 0 29.973125 0 21.5458333 3.19875 21.5458333 3.19875 8.425625 0 8.425625 0 0 12.4010417 0 20.9572917 11.8164583 29.5135417 0 41.9116667 0 41.9116667 8.425625 38.7110417 8.425625 38.7110417 21.5458333 41.9116667 21.5458333 41.9116667 29.973125 26.1270833 29.973125 26.1270833 21.5458333 29.5377083 21.5458333 29.5377083 13.0122917 20.9572917 24.7441667"></polyline>
                <polyline fill="var(--color-blue-400, #00274C)" points="58.6452083 30 58.6452083 0.0420833333 62.461875 0.0420833333 62.461875 26.680625 73.4579167 26.680625 73.4579167 30 58.6452083 30"></polyline>
                <polygon fill="var(--color-blue-400, #00274C)" points="77.9570833 29.9875 81.773125 29.9875 81.773125 0.0420833333 77.9570833 0.0420833333"></polygon>
                <path d="M91.0308333,26.680625 L96.425,26.680625 C100.491042,26.680625 101.944583,23.775625 101.944583,21.5777083 C101.944583,16.8052083 98.9972917,15.9754167 95.0983333,15.9754167 L91.0308333,15.9754167 L91.0308333,26.680625 Z M91.0308333,12.655625 L96.5916667,12.655625 C99.5779167,12.6139583 101.032083,10.7891667 101.032083,7.884375 C101.032083,5.395 99.6195833,3.36145833 96.425,3.36145833 L91.0308333,3.36145833 L91.0308333,12.655625 Z M87.2135417,30 L87.2135417,0.0420833333 L96.9652083,0.0420833333 C101.114375,0.0420833333 102.524792,1.4525 103.644792,3.11291667 C104.683542,4.73125 104.848958,6.51583333 104.848958,7.095625 C104.848958,10.83 103.562917,13.320625 99.7033333,14.1910417 L99.7033333,14.399375 C103.978333,14.8972917 105.844583,17.4695833 105.844583,21.5777083 C105.844583,29.2535417 100.242708,30 96.8402083,30 L87.2135417,30 Z" fill="var(--color-blue-400, #00274C)"></path>
                <path d="M113.772708,12.9047917 L119.500625,12.9047917 C122.239792,12.9047917 123.5675,10.5397917 123.5675,7.925 C123.5675,5.76791667 122.485833,3.36145833 119.540625,3.36145833 L113.772708,3.36145833 L113.772708,12.9047917 Z M113.772708,16.2245833 L113.772708,30 L109.956458,30 L109.956458,0.0420833333 L120.28875,0.0420833333 C125.6,0.0420833333 127.465625,3.77729167 127.465625,7.51104167 C127.465625,11.0377083 125.515833,13.7347917 121.988125,14.3575 L121.988125,14.44 C125.431042,14.9795833 126.675417,16.14125 126.885,22.1570833 C126.927083,23.4435417 127.341042,28.1325 127.924167,30 L123.940833,30 C122.860417,27.9254167 123.108542,24.025625 122.777083,20.041875 C122.485833,16.3908333 119.540625,16.2245833 118.25625,16.2245833 L113.772708,16.2245833 Z" fill="var(--color-blue-400, #00274C)"></path>
                <path d="M143.173333,3.56770833 L143.09,3.56770833 L138.401042,19.5439583 L147.989375,19.5439583 L143.173333,3.56770833 Z M140.848333,0.0420833333 L145.703958,0.0420833333 L155.45625,30 L151.181875,30 L149.025417,22.8620833 L137.448958,22.8620833 L135.207292,30 L131.349167,30 L140.848333,0.0420833333 Z" fill="var(--color-blue-400, #00274C)"></path>
                <path d="M162.97875,12.9047917 L168.704583,12.9047917 C171.442292,12.9047917 172.769167,10.5397917 172.769167,7.925 C172.769167,5.76791667 171.69125,3.36145833 168.745625,3.36145833 L162.97875,3.36145833 L162.97875,12.9047917 Z M162.97875,16.2245833 L162.97875,30 L159.159375,30 L159.159375,0.0420833333 L169.491667,0.0420833333 C174.801667,0.0420833333 176.670625,3.77729167 176.670625,7.51104167 C176.670625,11.0377083 174.720208,13.7347917 171.192708,14.3575 L171.192708,14.44 C174.636458,14.9795833 175.881042,16.14125 176.087917,22.1570833 C176.1325,23.4435417 176.546458,28.1325 177.125833,30 L173.142083,30 C172.064583,27.9254167 172.314583,24.025625 171.981875,20.041875 C171.69125,16.3908333 168.745625,16.2245833 167.459583,16.2245833 L162.97875,16.2245833 Z" fill="var(--color-blue-400, #00274C)"></path>
                <polyline fill="var(--color-blue-400, #00274C)" points="194.878958 0.0420833333 198.737917 0.0420833333 190.562708 18.5897917 190.562708 30 186.744583 30 186.744583 18.5897917 178.695208 0.0420833333 182.968542 0.0420833333 188.82 14.5227083 194.878958 0.0420833333"></polyline>
                <polygon fill="var(--color-blue-400, #00274C)" points="50.1395834 29.9875 51.19625 29.9875 51.19625 0 50.1395834 0"></polygon>
              </g>
            </g>
          </svg>
        </a>
      </div>
      
      <div class="header-large-nav-wrapper">
        <!-- Primary Navigation -->
        {primary && primary.length > 0 && (
          <nav aria-label="Main" aria-describedby="main-nav-description" class="primary-nav-large">
            <p id="main-nav-description" class="visually-hidden">
              Expand main navigation buttons to view related content groups and associated links.
            </p>
            <ul class="primary-nav-list">
              {primary.map((item, index) => (
                <li class="primary-nav-item">
                  <button 
                    class="primary-nav-btn"
                    aria-expanded="false"
                    data-nav-index={index}
                  >
                    {item.text}
                  </button>
                  {item.children && item.children.length > 0 && (
                    <div class="primary-dropdown" hidden data-dropdown-index={index}>
                      <div class="primary-dropdown-content">
                        <ul>
                          {item.children.map((child) => (
                            <li><a href={child.to}>{child.text}</a></li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  )}
                </li>
              ))}
            </ul>
          </nav>
        )}
        
        <!-- Utility Navigation (top right) -->
        {secondary && secondary.length > 0 && (
          <nav aria-label="Utility" class="utility-nav-large">
            <ul>
              {secondary.map((item) => (
                <li>
                  <a href={item.to} class:list={[item.to === '/my-account' && 'external']}>
                    {item.icon && <span class="material-icons" style="font-size: 14px;">{item.icon}</span>}
                    <span class="utility-text">{item.text}</span>
                  </a>
                </li>
              ))}
            </ul>
          </nav>
        )}
        
        <!-- Site Search -->
        <div class="site-search-wrapper">
          <input 
            type="search" 
            placeholder="Search this site" 
            aria-label="Search this site"
            class="site-search-input"
            id="desktop-search-input"
          />
          <button class="site-search-btn" aria-label="Submit search" id="desktop-search-btn">
            <span class="material-icons">search</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
  const mobileDropdown = document.getElementById('mobile-dropdown');
  const menuIcon = mobileMenuToggle?.querySelector('.material-icons');
  
  if (mobileMenuToggle && mobileDropdown) {
    mobileMenuToggle.addEventListener('click', () => {
      const isExpanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';
      mobileMenuToggle.setAttribute('aria-expanded', String(!isExpanded));
      mobileDropdown.hidden = isExpanded;
      
      // Toggle icon
      if (menuIcon) {
        menuIcon.textContent = isExpanded ? 'menu' : 'close';
      }
    });
  }
  
  // Mobile primary nav item toggles
  const mobilePrimaryBtns = document.querySelectorAll('.mobile-primary-btn');
  mobilePrimaryBtns.forEach((btn) => {
    btn.addEventListener('click', () => {
      const isExpanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!isExpanded));
      
      const panel = btn.nextElementSibling as HTMLElement;
      if (panel) {
        panel.hidden = isExpanded;
      }
    });
  });
  
  // Mobile search button
  const mobileSearchBtn = document.getElementById('mobile-search-btn');
  if (mobileSearchBtn) {
    mobileSearchBtn.addEventListener('click', () => {
      // TODO: Implement mobile search modal
      alert('Mobile search modal - to be implemented');
    });
  }
  
  // Desktop primary nav toggles
  const primaryNavBtns = document.querySelectorAll('.primary-nav-btn');
  let currentOpenDropdown: number | null = null;
  
  primaryNavBtns.forEach((btn) => {
    btn.addEventListener('click', () => {
      const index = Number(btn.getAttribute('data-nav-index'));
      const isExpanded = btn.getAttribute('aria-expanded') === 'true';
      const dropdown = document.querySelector(`[data-dropdown-index="${index}"]`) as HTMLElement;
      
      // Close previously open dropdown if different
      if (currentOpenDropdown !== null && currentOpenDropdown !== index) {
        const prevBtn = document.querySelector(`[data-nav-index="${currentOpenDropdown}"]`);
        const prevDropdown = document.querySelector(`[data-dropdown-index="${currentOpenDropdown}"]`) as HTMLElement;
        if (prevBtn) prevBtn.setAttribute('aria-expanded', 'false');
        if (prevDropdown) prevDropdown.hidden = true;
      }
      
      // Toggle current dropdown
      btn.setAttribute('aria-expanded', String(!isExpanded));
      if (dropdown) {
        dropdown.hidden = isExpanded;
      }
      
      currentOpenDropdown = isExpanded ? null : index;
    });
  });
  
  // Close dropdowns when clicking outside
  document.addEventListener('click', (event) => {
    const target = event.target as HTMLElement;
    if (!target.closest('.primary-nav-large')) {
      primaryNavBtns.forEach((btn) => {
        btn.setAttribute('aria-expanded', 'false');
      });
      document.querySelectorAll('.primary-dropdown').forEach((dropdown) => {
        (dropdown as HTMLElement).hidden = true;
      });
      currentOpenDropdown = null;
    }
  });
  
  // Desktop search functionality
  const desktopSearchInput = document.getElementById('desktop-search-input') as HTMLInputElement;
  const desktopSearchBtn = document.getElementById('desktop-search-btn');
  
  if (desktopSearchBtn && desktopSearchInput) {
    desktopSearchBtn.addEventListener('click', () => {
      const query = desktopSearchInput.value.trim();
      if (query) {
        // TODO: Implement Lunr.js search
        window.location.href = `/search?q=${encodeURIComponent(query)}`;
      }
    });
    
    desktopSearchInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const query = desktopSearchInput.value.trim();
        if (query) {
          window.location.href = `/search?q=${encodeURIComponent(query)}`;
        }
      }
    });
  }
</script>

<style>
  /* Common styles */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  .logo {
    display: inline-block;
    text-decoration: none;
    line-height: 0;
  }
  
  .logo svg {
    display: block;
  }
  
  .material-icons {
    font-size: 1.125rem;
    font-family: 'Material Icons';
    font-weight: normal;
    font-style: normal;
    line-height: 1;
    letter-spacing: normal;
    text-transform: none;
    display: inline-block;
    white-space: nowrap;
    word-wrap: normal;
    direction: ltr;
    vertical-align: middle;
  }
  
  /* Mobile Header */
  .header-mobile {
    display: block;
    border-bottom: 2px solid var(--color-neutral-100, #e0e0e0);
    background: white;
  }
  
  .header-content-mobile {
    max-width: 1280px;
    margin: 0 auto;
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .mobile-menu-btn {
    background: none;
    border: none;
    padding: 0.5rem;
    cursor: pointer;
    color: var(--color-blue-400, #00274C);
  }
  
  .mobile-menu-btn:hover {
    color: var(--color-teal-400, #0891B2);
  }
  
  .mobile-nav-panel {
    border-top: 1px solid var(--color-neutral-100, #e0e0e0);
    background: white;
    max-height: 80vh;
    overflow-y: auto;
  }
  
  .mobile-nav-panel nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .mobile-nav-panel nav > ul > li {
    border-bottom: 1px solid var(--color-neutral-100, #e0e0e0);
  }
  
  .mobile-nav-panel a,
  .mobile-nav-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 1rem;
    color: var(--color-blue-400, #00274C);
    text-decoration: none;
    font-weight: 600;
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    font-size: 1rem;
  }
  
  .mobile-nav-toggle:hover,
  .mobile-nav-panel a:hover {
    background: var(--color-neutral-50, #f9f9f9);
    color: var(--color-teal-400, #0891B2);
  }
  
  .mobile-nav-toggle .material-icons {
    transition: transform 0.3s ease;
  }
  
  .mobile-subnav {
    background: var(--color-neutral-50, #f9f9f9);
  }
  
  .mobile-subnav a {
    padding-left: 2rem;
    font-weight: normal;
  }
  
  .mobile-utility {
    border-top: 2px solid var(--color-neutral-100, #e0e0e0);
    padding: 1rem 0;
  }
  
  .mobile-utility a {
    gap: 0.5rem;
    font-weight: normal;
  }
  
  /* Desktop Header */
  .header-desktop {
    display: none;
  }
  
  .header-content {
    max-width: 1280px;
    margin: 0 auto;
    padding: 1rem;
    position: relative;
  }
  
  .utility-nav {
    position: absolute;
    top: 1rem;
    right: 1rem;
  }
  
  .utility-nav ul {
    display: flex;
    gap: 1rem;
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .utility-nav a {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    color: var(--color-neutral-400, #666);
    text-decoration: none;
    font-size: 0.875rem;
  }
  
  .utility-nav a:hover {
    text-decoration: underline;
  }
  
  .primary-nav {
    margin-top: 0.5rem;
  }
  
  .primary-nav ul {
    display: flex;
    align-items: stretch;
    gap: 0;
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .primary-nav li {
    position: relative;
    margin-right: 2rem;
  }
  
  .nav-toggle,
  .nav-link {
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    color: var(--color-blue-400, #00274C);
    cursor: pointer;
    display: inline-block;
    font-size: 0.875rem;
    font-weight: 600;
    padding: 1rem 0;
    text-decoration: none;
    transition: border-color 0.2s ease;
  }
  
  .nav-toggle:hover,
  .nav-link:hover {
    border-bottom-color: var(--color-teal-400, #0891B2);
  }
  
  .nav-toggle[aria-expanded="true"] {
    border-bottom-color: var(--color-teal-400, #0891B2);
  }
  
  .dropdown-panel {
    position: absolute;
    top: 100%;
    left: 0;
    min-width: 20rem;
    background: white;
    border: 1px solid var(--color-neutral-100, #e0e0e0);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 100;
    margin-top: -3px;
  }
  
  .dropdown-content {
    padding: 1rem;
  }
  
  .dropdown-content ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .dropdown-content li {
    margin: 0;
  }
  
  .dropdown-content a {
    display: block;
    padding: 0.5rem 1rem;
    color: var(--color-blue-400, #00274C);
    text-decoration: none;
    border-radius: 4px;
  }
  
  .dropdown-content a:hover {
    background: var(--color-neutral-50, #f9f9f9);
    color: var(--color-teal-400, #0891B2);
  }
  
  .search-box {
    display: flex;
    gap: 0.5rem;
    margin-top: 1rem;
    max-width: 21rem;
  }
  
  .search-input {
    flex: 1;
    padding: 0.5rem 1rem;
    border: 1px solid var(--color-neutral-300, #ccc);
    border-radius: 4px;
    font-size: 0.875rem;
  }
  
  .search-input:focus {
    outline: 2px solid var(--color-blue-400, #00274C);
    outline-offset: 2px;
  }
  
  .search-btn {
    padding: 0.5rem 1rem;
    background: var(--color-blue-400, #00274C);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .search-btn:hover {
    background: var(--color-teal-400, #0891B2);
  }
  
  /* Responsive: Show desktop header on large screens */
  @media (min-width: 1129px) {
    .header-mobile {
      display: none;
    }
    
    .header-desktop {
      display: block;
      border-bottom: 2px solid var(--color-neutral-100, #e0e0e0);
      background: white;
    }
  }
</style>
