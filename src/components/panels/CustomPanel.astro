---
/**
 * CustomPanel - Custom panel content
 * Converted from src/components/panels/custom-panel.js
 */
import FeaturedAndLatestNews from './FeaturedAndLatestNews.astro';
import WhatsHappeningPanel from './WhatsHappeningPanel.astro';
import EventsAndExhibitsPanel from './EventsAndExhibitsPanel.astro';
import { fetchNewsDataForHomepage } from '../../lib/news-data.js';

interface Props {
  data: any;
}

const { data } = Astro.props;

// Fetch news data if this is a featured_and_latest_news panel
let newsData = null;
if (data.field_machine_name === "featured_and_latest_news") {
  newsData = await fetchNewsDataForHomepage();
}
---
{data.field_machine_name == "featured_and_latest_news" && newsData && (
  <FeaturedAndLatestNews 
    featuredNews={newsData.featuredNews}
    priorityNews={newsData.priorityNews}
    recentNews={newsData.recentNews}
    newsLandingSlug={newsData.newsLandingSlug}
  />
)}
{data.field_machine_name == "ee_featured" && 
  <WhatsHappeningPanel/>
}
{data.field_machine_name =='ee_landing' && 
  <EventsAndExhibitsPanel />
}

<style>
  .custom-panel-placeholder {
    padding: 1rem;
    background: var(--color-neutral-50, #f9f9f9);
    border: 1px dashed var(--color-neutral-300, #ccc);
  }
</style>
